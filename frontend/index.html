<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Compass â€” Financial Intelligence</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <div class="logo-icon">â—ˆ</div>
        <span class="logo-text">Compass</span>
      </div>
      
      <nav class="nav">
        <a href="#" class="nav-item active" data-view="dashboard">
          <span class="nav-icon">â¬¡</span>
          <span>Dashboard</span>
        </a>
        <a href="#" class="nav-item" data-view="chat">
          <span class="nav-icon">â—¯</span>
          <span>Advisor</span>
        </a>
        <a href="#" class="nav-item" data-view="goals">
          <span class="nav-icon">â–³</span>
          <span>Goals</span>
        </a>
        <a href="#" class="nav-item" data-view="budget">
          <span class="nav-icon">â–¢</span>
          <span>Budget</span>
        </a>
        <a href="#" class="nav-item" data-view="compare">
          <span class="nav-icon">â‡„</span>
          <span>Compare</span>
        </a>
      </nav>
      
      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">S</div>
          <div class="user-details">
            <span class="user-name">Sarah</span>
            <span class="user-status">Demo Account</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <!-- Dashboard View -->
      <section class="view view-dashboard active" id="view-dashboard">
        <header class="view-header">
          <div>
            <h1>Good morning, Sarah</h1>
            <p class="subtitle">Here's your financial snapshot</p>
          </div>
          <div class="header-actions">
            <button class="btn btn-secondary" onclick="refreshDashboard()">
              <span>â†»</span> Refresh
            </button>
          </div>
        </header>

        <div class="dashboard-grid">
          <!-- Net Worth Card -->
          <div class="card card-highlight">
            <div class="card-header">
              <span class="card-label">Total Assets</span>
              <span class="card-badge positive">+2.3%</span>
            </div>
            <div class="card-value" id="total-assets">$16,000</div>
            <div class="card-breakdown" id="assets-breakdown">
              <div class="breakdown-item">
                <span>Checking</span>
                <span id="checking-balance">$3,000</span>
              </div>
              <div class="breakdown-item">
                <span>Savings</span>
                <span id="savings-balance">$8,000</span>
              </div>
              <div class="breakdown-item">
                <span>Investments</span>
                <span id="investments-balance">$5,000</span>
              </div>
            </div>
          </div>

          <!-- Monthly Surplus -->
          <div class="card">
            <div class="card-header">
              <span class="card-label">Monthly Surplus</span>
              <span class="card-badge neutral">Available</span>
            </div>
            <div class="card-value positive" id="monthly-surplus">$2,250</div>
            <div class="card-detail">After expenses & budgets</div>
          </div>

          <!-- Investment Reminder -->
          <div class="card card-action" id="reminder-card">
            <div class="card-header">
              <span class="card-label">Investment Insight</span>
              <span class="card-icon">ðŸ’¡</span>
            </div>
            <p class="card-message" id="reminder-message">Loading...</p>
            <button class="btn btn-primary btn-sm" onclick="switchView('chat')">
              Explore Options
            </button>
          </div>

          <!-- Goals Overview -->
          <div class="card card-wide">
            <div class="card-header">
              <span class="card-label">Goal Progress</span>
              <a href="#" class="card-link" onclick="switchView('goals')">View All â†’</a>
            </div>
            <div class="goals-list" id="goals-list">
              <!-- Populated by JS -->
            </div>
          </div>

          <!-- Budget Status -->
          <div class="card">
            <div class="card-header">
              <span class="card-label">Budget This Month</span>
              <span class="card-badge" id="budget-badge">On Track</span>
            </div>
            <div class="budget-ring" id="budget-ring">
              <svg viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" class="ring-bg"/>
                <circle cx="50" cy="50" r="40" class="ring-progress" id="budget-progress"/>
              </svg>
              <div class="ring-center">
                <span class="ring-value" id="budget-percent">0%</span>
                <span class="ring-label">used</span>
              </div>
            </div>
            <div class="budget-summary">
              <span id="budget-spent">$0</span> of <span id="budget-total">$750</span>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="card">
            <div class="card-header">
              <span class="card-label">Quick Actions</span>
            </div>
            <div class="quick-actions">
              <button class="action-btn" onclick="openAdvisor('save $500')">
                <span class="action-icon">â†“</span>
                <span>Save</span>
              </button>
              <button class="action-btn" onclick="openAdvisor('invest $500')">
                <span class="action-icon">â†—</span>
                <span>Invest</span>
              </button>
              <button class="action-btn" onclick="openAdvisor('compare saving vs investing')">
                <span class="action-icon">â‡„</span>
                <span>Compare</span>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Chat/Advisor View -->
      <section class="view view-chat" id="view-chat">
        <header class="view-header">
          <div>
            <h1>Financial Advisor</h1>
            <p class="subtitle">Ask me anything about your finances</p>
          </div>
          <div class="header-actions">
            <button id="mode-toggle" class="mode-toggle" onclick="toggleAnalysisMode()" title="Toggle analysis depth">
              <span class="mode-icon">âš¡</span>
              <span class="mode-label">Quick</span>
            </button>
          </div>
        </header>

        <div class="chat-container">
          <div class="chat-messages" id="chat-messages">
            <div class="message assistant">
              <div class="message-avatar">â—ˆ</div>
              <div class="message-content">
                <p>Hi Sarah! I'm your AI financial advisor. I can help you:</p>
                <ul>
                  <li>Simulate financial decisions before you make them</li>
                  <li>Compare different options side-by-side</li>
                  <li>Track progress toward your goals</li>
                  <li>Stay within budget while reaching your targets</li>
                </ul>
                <p>What would you like to explore today?</p>
              </div>
            </div>
          </div>

          <div class="chat-suggestions" id="chat-suggestions">
            <button class="suggestion" onclick="sendSuggestion('Should I save $500 or invest it?')">
              Should I save $500 or invest it?
            </button>
            <button class="suggestion" onclick="sendSuggestion('How am I doing on my emergency fund?')">
              How am I doing on my emergency fund?
            </button>
            <button class="suggestion" onclick="sendSuggestion('What happens if I spend $300 on entertainment?')">
              What if I spend $300 on entertainment?
            </button>
          </div>

          <form class="chat-input" onsubmit="sendMessage(event)">
            <input 
              type="text" 
              id="message-input" 
              placeholder="Ask about saving, investing, budgeting..."
              autocomplete="off"
            >
            <button type="submit" class="btn btn-primary" id="send-btn">
              <span>Send</span>
              <span class="send-icon">â†’</span>
            </button>
          </form>
        </div>
      </section>

      <!-- Goals View -->
      <section class="view view-goals" id="view-goals">
        <header class="view-header">
          <div>
            <h1>Financial Goals</h1>
            <p class="subtitle">Track your progress toward financial freedom</p>
          </div>
          <div class="header-actions">
            <button class="btn btn-primary" onclick="showAddGoalModal()">
              <span>+</span> Add Goal
            </button>
          </div>
        </header>

        <div class="goals-grid" id="goals-detail-list">
          <!-- Populated by JS -->
        </div>
      </section>
      
      <!-- Add Goal Modal -->
      <div id="add-goal-modal" class="modal" style="display: none;">
        <div class="modal-backdrop" onclick="hideAddGoalModal()"></div>
        <div class="modal-content">
          <div class="modal-header">
            <h2>Create New Goal</h2>
            <button class="modal-close" onclick="hideAddGoalModal()">Ã—</button>
          </div>
          <form id="add-goal-form" onsubmit="createGoal(event)">
            <div class="form-group">
              <label for="goal-name">Goal Name</label>
              <input type="text" id="goal-name" placeholder="e.g., New Car, Vacation" required>
            </div>
            <div class="form-group">
              <label for="goal-amount">Target Amount ($)</label>
              <input type="number" id="goal-amount" placeholder="10000" min="1" required>
            </div>
            <div class="form-group">
              <label for="goal-current">Current Amount ($)</label>
              <input type="number" id="goal-current" placeholder="0" min="0" value="0">
            </div>
            <div class="form-group">
              <label for="goal-deadline">Target Date</label>
              <input type="date" id="goal-deadline" required>
            </div>
            <div class="form-group">
              <label for="goal-priority">Priority (1-10)</label>
              <input type="number" id="goal-priority" placeholder="5" min="1" max="10" value="5">
            </div>
            <div class="modal-actions">
              <button type="button" class="btn btn-secondary" onclick="hideAddGoalModal()">Cancel</button>
              <button type="submit" class="btn btn-primary">Create Goal</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Budget View -->
      <section class="view view-budget" id="view-budget">
        <header class="view-header">
          <div>
            <h1>Budget Overview</h1>
            <p class="subtitle">Your spending categories this month</p>
          </div>
        </header>

        <!-- Upcoming Expenses Section -->
        <div class="upcoming-expenses-section" id="upcoming-expenses-section" style="display: none;">
          <div class="upcoming-expenses-card">
            <div class="upcoming-header">
              <span class="upcoming-icon">ðŸ“…</span>
              <div>
                <h3>Upcoming Expenses</h3>
                <p class="upcoming-summary" id="upcoming-summary"></p>
              </div>
            </div>
            <div class="upcoming-list" id="upcoming-list">
              <!-- Populated by JS -->
            </div>
          </div>
        </div>

        <!-- Underspending Insights (if any) -->
        <div class="underspending-section" id="underspending-section" style="display: none;">
          <div class="underspending-card">
            <div class="underspending-header">
              <span class="underspending-icon">ðŸ’°</span>
              <div>
                <h3>Unspent Budget Available</h3>
                <p class="underspending-summary" id="underspending-summary"></p>
              </div>
            </div>
            <div class="underspending-categories" id="underspending-categories">
              <!-- Populated by JS -->
            </div>
            <div class="underspending-recommendation" id="underspending-recommendation">
              <!-- Populated by JS -->
            </div>
          </div>
        </div>

        <div class="budget-grid" id="budget-categories">
          <!-- Populated by JS -->
        </div>
      </section>

      <!-- Compare View -->
      <section class="view view-compare" id="view-compare">
        <header class="view-header">
          <div>
            <h1>Compare Options</h1>
            <p class="subtitle">See how different financial decisions stack up side-by-side</p>
          </div>
        </header>

        <!-- Comparison Input -->
        <div class="compare-input-section">
          <div class="compare-presets">
            <h3>Quick Comparisons</h3>
            <div class="preset-buttons">
              <button class="btn btn-secondary" onclick="runPresetComparison('save-vs-invest')">
                Save vs Invest $500
              </button>
              <button class="btn btn-secondary" onclick="runPresetComparison('small-vs-large')">
                Invest $300 vs $700
              </button>
              <button class="btn btn-secondary" onclick="runPresetComparison('goals')">
                Compare Goal Allocations
              </button>
            </div>
          </div>

          <div class="compare-custom">
            <h3>Custom Comparison</h3>
            <form id="compare-form" onsubmit="runCustomComparison(event)">
              <div class="compare-options-input">
                <div class="compare-option-input">
                  <label>Option 1</label>
                  <select id="compare-action-1">
                    <option value="save">Save</option>
                    <option value="invest">Invest</option>
                    <option value="spend">Spend</option>
                  </select>
                  <input type="number" id="compare-amount-1" placeholder="Amount" min="1" value="500">
                </div>
                <div class="compare-vs">VS</div>
                <div class="compare-option-input">
                  <label>Option 2</label>
                  <select id="compare-action-2">
                    <option value="save">Save</option>
                    <option value="invest" selected>Invest</option>
                    <option value="spend">Spend</option>
                  </select>
                  <input type="number" id="compare-amount-2" placeholder="Amount" min="1" value="500">
                </div>
              </div>
              <button type="submit" class="btn btn-primary">Compare</button>
            </form>
          </div>
        </div>

        <!-- Comparison Results -->
        <div class="compare-results" id="compare-results" style="display: none;">
          <h3>Comparison Results</h3>
          <div class="compare-cards" id="compare-cards">
            <!-- Populated by JS -->
          </div>
          <div class="compare-recommendation" id="compare-recommendation">
            <!-- Populated by JS -->
          </div>
        </div>

        <!-- Loading State -->
        <div class="compare-loading" id="compare-loading" style="display: none;">
          <div class="spinner"></div>
          <p>Analyzing options...</p>
        </div>
      </section>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
